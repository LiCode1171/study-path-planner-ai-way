# ECharts ç”˜ç‰¹å›¾ç»„ä»¶ä½¿ç”¨è¯´æ˜

## ç»„ä»¶æ¦‚è¿°

`StudyGanttChart.vue` æ˜¯ä¸€ä¸ªä¸“ä¸ºä¸“å‡æœ¬å­¦ä¹ è®¡åˆ’è®¾è®¡çš„ç”˜ç‰¹å›¾å¯è§†åŒ–ç»„ä»¶ï¼Œä½¿ç”¨ ECharts 5.4.3 å®ç°ã€‚

## åŠŸèƒ½ç‰¹æ€§

### 1. çŠ¶æ€æ˜¾ç¤ºï¼ˆ4ç§ï¼‰
- âœ… **å·²å®Œæˆ** (ç»¿è‰² #27ae60) - completed = 1
- ğŸ“ **è¿›è¡Œä¸­** (è“è‰² #3498db) - æœ‰è¿›åº¦ä½†æœªå®Œæˆï¼Œä¸”æ˜¯ä»Šå¤©æˆ–è¿‡å»çš„ä»»åŠ¡
- ğŸ”„ **è¡¥äº¤** (çº¢è‰² #f4516c) - completed = 2
- â³ **æœªå¼€å§‹** (ç°è‰² #95a5a6) - æœªå¼€å§‹çš„ä»»åŠ¡

### 2. äº¤äº’åŠŸèƒ½
- **ç§‘ç›®ç­›é€‰**ï¼šç‚¹å‡»æŒ‰é’®ç­›é€‰ç‰¹å®šç§‘ç›®
- **é¼ æ ‡æ‚¬åœ**ï¼šæ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…ï¼ˆçŸ¥è¯†ç‚¹ã€ç§‘ç›®ã€å¤©æ•°ã€ç±»å‹ã€è¿›åº¦ã€çŠ¶æ€ï¼‰
- **ç‚¹å‡»ä»»åŠ¡**ï¼šå¼¹çª—æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
- **æ»šåŠ¨æ¡**ï¼šæ”¯æŒ7-30å¤©èŒƒå›´çš„æ»‘åŠ¨æŸ¥çœ‹
- **å“åº”å¼**ï¼šçª—å£å¤§å°å˜åŒ–æ—¶è‡ªåŠ¨è°ƒæ•´

### 3. æ•°æ®å±•ç¤º
- **ç»Ÿè®¡å¡ç‰‡**ï¼šæ€»å¤©æ•°ã€æ¯æ—¥å­¦ä¹ æ—¶é•¿ã€å‰©ä½™å¤©æ•°ã€å½“å‰è¿›åº¦
- **ç§‘ç›®å›¾ä¾‹**ï¼šæ˜¾ç¤ºå„ç§‘ç›®å¯¹åº”é¢œè‰²
- **çŠ¶æ€å›¾ä¾‹**ï¼šæ˜¾ç¤º4ç§çŠ¶æ€çš„é¢œè‰²è¯´æ˜
- **ç”˜ç‰¹å›¾**ï¼šæ¨ªè½´ä¸ºå¤©æ•°ï¼Œçºµè½´ä¸ºç§‘ç›®ï¼Œä»»åŠ¡æ¡æ˜¾ç¤ºçŠ¶æ€

## ç»„ä»¶æ¥å£

### Props

```typescript
interface Props {
  // å­¦ä¹ è®¡åˆ’æ•°æ®
  studyPlanData: {
    planName: string
    totalDays: number
    dailyHours: number
    startDate: string
    endDate: string
    planItems: Array<{
      id: number
      dayIndex: number      // ç¬¬å‡ å¤©
      sort: number          // ä»»åŠ¡æ’åº
      knowledgePointId: number
      subjectName: string
      completed: number     // 0-æœªå¼€å§‹, 1-å·²å®Œæˆ, 2-è¡¥äº¤
      isReview: number      // 0-æ–°çŸ¥è¯†ç‚¹, 1-å¤ä¹ 
      splitPart: number     // å½“å‰æ˜¯ç¬¬å‡ éƒ¨åˆ†
      totalParts: number    // æ€»å…±å‡ éƒ¨åˆ†
      splitHours: number    // æœ¬æ¬¡åˆ†é…æ—¶é•¿
    }>
  }
  
  // çŸ¥è¯†ç‚¹åç§°æ˜ å°„
  knowledgePointMap: Record<number, string>
}
```

### ä½¿ç”¨ç¤ºä¾‹

```vue
<template>
  <div>
    <StudyGanttChart
      v-if="studyPlanData && studyPlanData.planItems && studyPlanData.planItems.length > 0"
      :study-plan-data="studyPlanData"
      :knowledge-point-map="knowledgePointMap"
    />
  </div>
</template>

<script setup>
import StudyGanttChart from '@/components/student/StudyGanttChart.vue'

const studyPlanData = ref({
  planName: 'ä¸“å‡æœ¬å¤‡è€ƒè®¡åˆ’',
  totalDays: 60,
  dailyHours: 7,
  startDate: '2025-01-01',
  endDate: '2025-03-01',
  planItems: [
    {
      id: 1,
      dayIndex: 1,
      sort: 1,
      knowledgePointId: 101,
      subjectName: 'é«˜ç­‰æ•°å­¦',
      completed: 1,
      isReview: 0,
      splitPart: 1,
      totalParts: 1,
      splitHours: 2
    }
    // ... æ›´å¤šä»»åŠ¡
  ]
})

const knowledgePointMap = ref({
  101: 'å‡½æ•°çš„æ¦‚å¿µä¸æ€§è´¨',
  102: 'å¯¼æ•°ä¸å¾®åˆ†',
  // ... æ›´å¤šçŸ¥è¯†ç‚¹
})
</script>
```

## çŠ¶æ€åˆ¤æ–­é€»è¾‘

```javascript
function getTaskStatus(task) {
  // 1. å·²å®ŒæˆçŠ¶æ€
  if (task.completed === 1) {
    return 1
  }
  
  // 2. è¡¥äº¤çŠ¶æ€
  if (task.completed === 2) {
    return 2
  }
  
  // 3. è¿›è¡Œä¸­çŠ¶æ€
  const isTodayOrPast = task.dayIndex <= todayDayIndex
  const hasProgress = task.splitPart > 0 && task.splitPart < task.totalParts
  
  if (isTodayOrPast && hasProgress) {
    return 3
  }
  
  // 4. æœªå¼€å§‹çŠ¶æ€
  return 0
}
```

## æ»šåŠ¨æ¡é…ç½®

- **åˆå§‹æ˜¾ç¤º**ï¼šå…¨éƒ¨èŒƒå›´ï¼ˆ0-100%ï¼‰
- **æœ€å°èŒƒå›´**ï¼šæ— é™åˆ¶ï¼ˆå¯è‡ªç”±æŸ¥çœ‹ä»»æ„èŒƒå›´ï¼‰
- **æœ€å¤§èŒƒå›´**ï¼šæ— é™åˆ¶ï¼ˆå¯æŸ¥çœ‹å…¨éƒ¨å¤©æ•°ï¼‰
- **ç”¨æˆ·æ“ä½œ**ï¼š
  - æ‹–åŠ¨æ»šåŠ¨æ¡ï¼šè‡ªç”±æŸ¥çœ‹ä»»ä½•å¤©æ•°èŒƒå›´
  - é¼ æ ‡æ»šè½®ï¼šåœ¨å›¾è¡¨åŒºåŸŸç¼©æ”¾æŸ¥çœ‹èŒƒå›´
  - å¯æŸ¥çœ‹1å¤©åˆ°å…¨éƒ¨å¤©æ•°ï¼Œå®Œå…¨è‡ªç”±

**é‡è¦è¯´æ˜**ï¼šç§»é™¤äº†minSpanå’ŒmaxSpané™åˆ¶ï¼Œç”¨æˆ·å¯ä»¥è‡ªç”±æŸ¥çœ‹ä»»ä½•å¤©æ•°èŒƒå›´ï¼Œæ— è®ºæ˜¯30å¤©ã€90å¤©è¿˜æ˜¯365å¤©çš„è®¡åˆ’ã€‚

## ç§‘ç›®é¢œè‰²æ–¹æ¡ˆ

### é¢„å®šä¹‰é¢œè‰²
- æ€æ”¿ç†è®ºï¼š#e74c3c (çº¢è‰²)
- ä¿¡æ¯æŠ€æœ¯åŸºç¡€ï¼š#3498db (è“è‰²)
- å¤§å­¦è‹±è¯­ï¼š#2ecc71 (ç»¿è‰²)
- é«˜ç­‰æ•°å­¦ï¼š#f39c12 (æ©™è‰²)

### å…¶ä»–ç§‘ç›®
ä»é¢œè‰²æ± ä¸­å¾ªç¯åˆ†é…ï¼š
`['#9b59b6', '#1abc9c', '#e67e22', '#34495e', '#16a085', '#27ae60', '#e84393', '#00b894', '#fdcb6e', '#6c5ce7']`

## æµ‹è¯•å»ºè®®

### 1. æ•°æ®å‡†å¤‡
ç¡®ä¿æ‚¨çš„ `studyPlanData` åŒ…å«ï¼š
- å®Œæ•´çš„è®¡åˆ’ä¿¡æ¯ï¼ˆå¤©æ•°ã€æ—¥æœŸã€å°æ—¶æ•°ï¼‰
- å¤šä¸ªä¸åŒç§‘ç›®çš„ä»»åŠ¡
- ä¸åŒçŠ¶æ€çš„ä»»åŠ¡ï¼ˆå·²å®Œæˆã€è¿›è¡Œä¸­ã€è¡¥äº¤ã€æœªå¼€å§‹ï¼‰
- è·¨å¤©ä»»åŠ¡ï¼ˆtotalParts > 1ï¼‰

### 2. åŠŸèƒ½æµ‹è¯•ç‚¹
- [ ] ç»„ä»¶æ˜¯å¦æ­£å¸¸æ˜¾ç¤º
- [ ] ç»Ÿè®¡å¡ç‰‡æ•°æ®æ˜¯å¦æ­£ç¡®
- [ ] ç§‘ç›®ç­›é€‰æ˜¯å¦æœ‰æ•ˆ
- [ ] é¼ æ ‡æ‚¬åœæ˜¯å¦æ˜¾ç¤ºè¯¦æƒ…
- [ ] ç‚¹å‡»ä»»åŠ¡æ˜¯å¦å¼¹çª—
- [ ] æ»šåŠ¨æ¡æ˜¯å¦å¯ä»¥æ‹–åŠ¨
- [ ] çª—å£å¤§å°å˜åŒ–æ˜¯å¦è‡ªé€‚åº”

### 3. è¾¹ç•Œæµ‹è¯•
- [ ] æ€»å¤©æ•°å°‘äº7å¤©
- [ ] æ€»å¤©æ•°è¶…è¿‡30å¤©
- [ ] æ²¡æœ‰ä»»åŠ¡æ•°æ®
- [ ] åªæœ‰ä¸€ä¸ªç§‘ç›®
- [ ] æ‰€æœ‰ä»»åŠ¡éƒ½å·²å®Œæˆ

## å¸¸è§é—®é¢˜

### Q: å›¾è¡¨ä¸æ˜¾ç¤ºï¼Ÿ
A: æ£€æŸ¥ï¼š
1. `studyPlanData` æ˜¯å¦æœ‰å€¼
2. `planItems` æ•°ç»„æ˜¯å¦ä¸ºç©º
3. `knowledgePointMap` æ˜¯å¦æ­£ç¡®åŠ è½½

### Q: çŠ¶æ€é¢œè‰²ä¸å¯¹ï¼Ÿ
A: æ£€æŸ¥ä»»åŠ¡çš„ `completed` å­—æ®µå’Œ `splitPart` å­—æ®µæ˜¯å¦æ­£ç¡®

### Q: æ»šåŠ¨æ¡èŒƒå›´ä¸å¯¹ï¼Ÿ
A: æ£€æŸ¥ `totalDays` æ˜¯å¦æ­£ç¡®ï¼Œç»„ä»¶ä¼šæ ¹æ®æ€»å¤©æ•°åŠ¨æ€è®¡ç®—

## ä¾èµ–è¯´æ˜

- **vue-echarts**: ^6.0.0 (å·²å®‰è£…ï¼Œç”¨äºVueç»„ä»¶åŒ–)
- **echarts**: ^5.2.2 (å·²å®‰è£…ï¼Œåº•å±‚å¼•æ“)
- **element-plus**: ^2.10.5 (å·²å®‰è£…)
- **vue**: ^3.5.18 (å·²å®‰è£…)

**é‡è¦**ï¼šä½¿ç”¨vue-echartsç»„ä»¶åº“ï¼Œæ— éœ€æ‰‹åŠ¨åˆå§‹åŒ–å’Œç®¡ç†å›¾è¡¨å®ä¾‹ã€‚

## æ–‡ä»¶ä½ç½®

- ç»„ä»¶æ–‡ä»¶ï¼š`src/components/student/StudyGanttChart.vue`
- ä½¿ç”¨ç¤ºä¾‹ï¼š`src/views/student/student-ui/study-plan.vue`

## æ›´æ–°æ—¥å¿—

### 2025-12-23
- âœ… åˆ›å»ºç”˜ç‰¹å›¾ç»„ä»¶
- âœ… å®ç°4ç§çŠ¶æ€æ˜¾ç¤ºï¼ˆæœªå¼€å§‹/è¿›è¡Œä¸­/å·²å®Œæˆ/è¡¥äº¤ï¼‰
- âœ… æ·»åŠ ç§‘ç›®ç­›é€‰åŠŸèƒ½
- âœ… é…ç½®7-30å¤©æ»šåŠ¨æ¡
- âœ… é›†æˆåˆ°study-plané¡µé¢
